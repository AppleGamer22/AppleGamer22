\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}

\documentclass[10pt, a4paper, fleqn]{article}
\usepackage[parfill]{parskip}
\usepackage{fontspec}
\usepackage{array}
\usepackage{varwidth}
\usepackage{cancel}
\usepackage{ulem}
\usepackage{amssymb, amsmath, amsthm, bm}
\usepackage[none]{hyphenat}
\usepackage[utf8]{inputenc}
\usepackage{menukeys}
\usepackage[unicode]{hyperref}
\usepackage{xcolor, color}
\usepackage{fancyvrb}
\usepackage[figure, table]{totalcount}
\usepackage{longtable, booktabs, array}
\usepackage{etoolbox}
\usepackage{graphicx}
\usepackage[margin=15mm]{geometry}
\usepackage{fancyhdr}
\usepackage{listings}
\usepackage{lstfiracode}
\usepackage{titling}
% \usepackage{subfigure}
% \usepackage{subcaption}
% \usepackage{float}

\makeatletter\def\fnum@table{\tablename~\thetable}\makeatother
\makeatletter\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}\makeatother
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
\makeatletter\def\fps@figure{htbp}\makeatother

\newcommand{\passthrough}[1]{#1}
\providecommand{\tightlist}{
	\setlength{\itemsep}{0pt}
	\setlength{\parskip}{0pt}
	\def\labelenumi{\arabic{enumi}.}
	\def\labelenumii{\alph{enumii}.}
	\def\labelenumiii{\roman{enumiii}.}
	\def\labelenumiv{\Alph{enumiv}.}
	\def\labelitemii{\circ}
	\def\labelitemiii{\blacksquare}
	\def\labelitemiv{\textasteriskcentered}
}

\title{$unit$ $assignment$}
\author{$author$}
\date{\today}
\setlength{\parindent}{0pt}
\setmonofont[Contextuals=Alternate, Scale=MatchLowercase]{Fira Code}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\urlstyle{same}
\pagestyle{fancy}
\fancyhf{}
\lhead{$date$}
\chead{\thetitle}
\rhead{{\theauthor} ($orcid$)}
\fancyfoot[C]{\thepage}
\setcounter{secnumdepth}{-\maxdimen}
\hypersetup{
	pdfauthor={\theauthor},
	colorlinks=true,
	linkcolor={Maroon},
	filecolor={Maroon},
	citecolor={Blue},
	urlcolor={Blue},
	pdfcreator={LaTeX via pandoc}
}
\lstset{
	basicstyle=\ttfamily,
	style=FiraCodeStyle,
	breaklines=true,
	breakatwhitespace=true,
	breakautoindent=true,
	linewidth=1.05\textwidth,
	keywordstyle=\color[HTML]{204a87}\bfseries,
	stringstyle=\color[HTML]{4e9a06},
	commentstyle=\color[HTML]{8f5902}\itshape,
	extendedchars=true,
	tabsize=4,
	columns=flexible,
	showspaces=false,
	showstringspaces=false,
	frame=single,
	postbreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\color{red}\hookrightarrow\space}}
}

$for(header-includes)$
	$header-includes$
$endfor$
$if(highlighting-macros)$
	$highlighting-macros$
$endif$

\begin{document}
	\thispagestyle{plain}
	\begin{figure}[!t]
		\begin{minipage}{0.295\textwidth} % Left side of title section
			\raggedright
			$author$ % Your name
			\\
			\footnotesize
			%\hfill\\ % Uncomment if right minipage has more lines
			$orcid$ % your matriculation number
		\end{minipage}
		\begin{minipage}{0.4\textwidth} % Center of title section
			\centering
			\Huge % Title text size
			$assignment$ % Assignment title and number
			\\
			\Large % Subtitle text size
			$unit$ % Your lecture or course
		\end{minipage}
		\begin{minipage}{0.295\textwidth} % Right side of title section
			\raggedleft
			$date$ % Date
			\\
			\footnotesize % Email text size
			%\hfill\\ % Uncomment if left minipage has more lines
			\href{mailto:$email$}{$email$}% Your email
		\end{minipage}
		$if(toc)$
			\fbox{\begin{minipage}{\textwidth}
				{
					$if(colorlinks)$
						\hypersetup{linkcolor=$if(toccolor)$$toccolor$$else$$endif$}
					$endif$
					\setcounter{tocdepth}{$toc-depth$}
					\tableofcontents
				}
				\iftotalfigures
					\listoffigures
				\fi
				\iftotaltables
					\listoftables
				\fi
			\end{minipage}}
		$endif$
	\end{figure}
	$body$
\end{document}
